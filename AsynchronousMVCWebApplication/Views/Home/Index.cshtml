@{
    ViewBag.Title = "Home Page";
}
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
            <p>
                DevNetNoord Asynchronous Demo
            </p>
        </div>
    </section>
}
<h3>SignalR</h3>
<p>
    <button id="startButton">start</button>
    <div class="demo">
        <div id="lineprocessingProgress"></div>
        <div id="lineprocssingProgressMessage"></div>

    </div>
</p>

@section scripts {
  <script src="@Url.Content("~/Scripts/jquery.signalR-0.5.3.min.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/signalr/hubs")" type="text/javascript"></script>
  <link href="../../Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="../../Content/themes/base/jquery.ui.progressbar.css" rel="stylesheet"
        type="text/css" />
  <script src="../../Scripts/jquery-ui-1.8.20.min.js" type="text/javascript"></script>
  
    <script type="text/javascript">
        $( "#demo" ).hide();

        var processingManager = $.connection.processingManager;

        processingManager.UpdateProgress = function ( percentage, message ) {
            $( "#demo" ).show();
            $( "#lineprocessingProgress" ).progressbar( {value: percentage} );
            $( "#lineprocssingProgressMessage" ).html( message );
        };

        $("#startButton").button().click(function() {
            processingManager.testRun();
        });

        $.connection.hub.start();
    </script>
}
